<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-2MN7C3CEX2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-2MN7C3CEX2');
    </script>
    <title>How to monitor your APIs in .NET with Treblle?</title>
    <link rel="icon" type="image/x-icon" href="/images/favicon.png">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description"
        content="The personal website of Stefan Djokic, featuring information about his background, experience, and interests.">
    <meta name="keywords" content=".NET, ASP.NET, Stefan Djokic, Treblle, Web API, .NET API, ASP.NET web API">
    <meta name="author" content="Stefan Djokic">
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900" rel="stylesheet">
    <link rel="stylesheet" href="/css/animate.css">
    <link rel="stylesheet" href="/css/flaticon.css">
    <link rel="stylesheet" href="/css/icomoon.css">
    <link rel="stylesheet" href="/css/style.css">
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar ftco-navbar-light site-navbar-target" id="ftco-navbar">
        <div class="container">
            <a class="navbar-brand" href="/">Stefan Đokić</a>
            <button class="navbar-toggler js-fh5co-nav-toggle fh5co-nav-toggle" type="button" data-toggle="collapse"
                data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="oi oi-menu"></span> Menu
            </button>
            <div class="collapse navbar-collapse" id="ftco-nav">
                <ul class="navbar-nav nav ml-auto">
                    <li class="nav-item"><a href="/" class="nav-link"><span>Home</span></a></li>
                    <li class="nav-item" data-toggle="collapse" data-target="#ftco-nav"><a href="/blog.html"
                            class="nav-link"><span>Blog</span></a></li>
                    <li class="nav-item" data-toggle="collapse" data-target="#ftco-nav"><a
                            href="/stefans-newsletter-sponsorship-opportunity.html"
                            class="nav-link"><span>Sponsorship</span></a></li>

                </ul>
            </div>
        </div>
    </nav>
    <section class="ftco-about img ftco-section ftco-no-pb" id="social-proof" style="margin-top: 50px;">
        <div class="container">
            <div class="justify-content-center pb-5">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 heading-section text-center ">
                    <h2 class="blog-header">#20 Stefan's Newsletter</h2>
                    <h1 class="blog-header2">How to monitor your APIs in .NET?</h1>
                    <h6>June 26 2023</h6>
                </div>
            </div>
            <div class="container d-flex">
                <div class="col-sm-12 col-md-12 col-lg-12 pb-5 blog-content">
                    <h3 class="text-center mb-5" style="color: #ffbd39">Background</h3>
                    <h5>
                        A typical API development flow in .NET:
                        <br><br>
                        • Read the requirements<br>
                        • Create controllers<br>
                        • Create services and connect them to the controllers<br>
                        • Implement support for Swagger<br>
                        • Test it<br><br>

                        And what after?<br>
                        Do we monitor endpoints?<br>
                        Do we measure performance?<br>
                        Is our API secure at all?<br><br>

                        We do not know.<br><br>

                        And how can we find out?<br><br>

                        <b style="color: #ffbd39">API Monitoring</b>.
                    </h5> <br>
                    <h3 class="text-center mb-5" style="color: #ffbd39">What should I monitor?
                    </h3>
                    <h5>As for what you should monitor, here are some of the key metrics:<br><br>

                        <b>• Endpoint Usage</b>: This will show you which of your API's endpoints are used most often.
                        <br><br>
                        <b>• Response Times</b>: This includes the time it takes for an API request to be processed and
                        the response to be returned.
                        <br><br>
                        <b>• Error Rates</b>: This measures the number of requests that result in an error. High error
                        rates can be a sign of problems.
                        <br><br>
                        <b>• Availability</b>: This is a measure of the uptime of your API - the time your API is
                        accessible and functional.
                        <br><br>
                        <b>• Throughput</b>: This is the number of requests your API can handle in a certain time frame.
                        <br><br>
                        <b>• Failed Request Traces</b>: Detailed information about failed requests can help you debug
                        and fix issues.
                        <br><br>
                        How can you track and measure this?
                        <br><br>
                        <b>I use an excellent and free (for my needs) tool - <span style="color: #ffbd39"><a
                                    href="https://www.treblle.com/?utm_source=referral&utm_medium=stef_blog&utm_campaign=stefan_content"
                                    target="_blank">Treblle</a></span>.</b>
                        <br><br>
                        Let me show you...
                    </h5>
                    <img src="/images/blog/newsletter20/1.png" alt="Treblle description image"
                        style="margin-top: 10px; margin-bottom: 10px; width: 100%;">
                    <br><br>
                    <h3 class="text-center mb-5" style="color: #ffbd39">What is Treblle?
                    </h3>
                    <h5>Treblle is a handy lightweight SDK that helps teams quickly create, deploy, and manage
                        REST-based APIs.
                        <br><br>
                        Practically, you install the Treblle SDK via Nuget, configure it in the Program.cs file and
                        that's it. You have an SDK ready for monitoring your APIs.
                        <br><br>
                        Let's configure it... You need only 3 minutes, trust me. :)
                    </h5>
                    <br>
                    <h3 class="text-center mb-5" style="color: #ffbd39">Treblle Integration
                    </h3>
                    <h4 class="mb-5" style="color: #ffbd39">Prerequirements:
                    </h4>
                    <h5>- Installed .NET Core 3.1 (There is also a version for the .NET Framework, but does anyone still
                        use that?).
                        <br>
                        <br>

                        <span><i> Advice: Use .NET 6 and Treblle version 1.0.8 since .NET Core 3.1 is
                                deprecated.</i></span>
                        <br>
                        <br>

                        - Create a FREE account on <span style="color: #ffbd39"> <a
                                href="https://www.treblle.com/?utm_source=referral&utm_medium=stef_blog&utm_campaign=stefan_content"
                                target="_blank">treblle.com</a></span> to get an API key and Project ID.
                    </h5>
                    <img src="/images/blog/newsletter20/15.jpg" alt="Created project (API) in Treblle platform."
                        style="margin-top: 10px; margin-bottom: 10px; width: 100%;">
                    <br>
                    <br>
                    <h4 class="mb-5" style="color: #ffbd39">Step #1: Install NuGet Package
                    </h4>
                    <h5>You can install Treblle .NET via NuGet Package Manager or by running the following command:
                    </h5>
                    <img src="/images/blog/newsletter20/16.png" alt="Treblle NuGet Package installation command."
                        style="margin-top: 10px; margin-bottom: 10px; width: 100%;">
                    <br>
                    <br>
                    <h4 class="mb-5" style="color: #ffbd39">Step #2: Configure Treblle
                    </h4>
                    <h5>You will need to add the required service by calling <span
                            style="color: #ffbd39">AddTreblle()</span> and providing your <span style="color: #ffbd39">
                            <a href="https://docs.treblle.com/en/dashboard/?utm_source=referral&utm_medium=stef_blog&utm_campaign=stefan_content#accessing-your-api-key"
                                target="_blank">API Key</a></span> and <span style="color: #ffbd39">
                            <a href="https://docs.treblle.com/en/dashboard/projects/?utm_source=referral&utm_medium=stef_blog&utm_campaign=stefan_content#project-id"
                                target="_blank">Project Id</a></span>.
                        <br>
                        <br>
                        Here’s an example of configuring the Treblle services and fetching the configuration values from
                        the application settings:
                    </h5>
                    <img src="/images/blog/newsletter20/2.png" alt="AddTreblle() method called in Program.cs."
                        style="margin-top: 10px; margin-bottom: 10px; width: 100%;">
                    <br>
                    <h5>appsettings.json file:
                    </h5>
                    <img src="/images/blog/newsletter20/3.png" alt="appsettings.json file with Treblle content."
                        style="margin-top: 10px; margin-bottom: 10px; width: 100%;">
                    <h5>Next you’ll need to add the <b>TreblleMiddleware</b> by calling <span
                            style="color: #ffbd39">UseTreblle</span> on the WebApplication instance. You can optionally
                        configure the use of the exception handler middleware.
                    </h5>
                    <img src="/images/blog/newsletter20/4.png" alt="UseTreblle() TreblleMiddleware call."
                        style="margin-top: 10px; margin-bottom: 10px; width: 100%;">
                    <br>
                    <br>
                    <h4 class="mb-5" style="color: #ffbd39">​Step #3: UseTreblle
                    </h4>
                    <h5>Now you can specify which endpoints you want Treblle to track by adding this simple attribute to
                        any API controller or method:
                    </h5>
                    <img src="/images/blog/newsletter20/5.png" alt="Treblle Attribute on the endpoint."
                        style="margin-top: 10px; margin-bottom: 10px; width: 100%;">
                    <br>
                    <br>
                    <h5>You're ready.
                        <br>
                        <br>
                        Start monitoring on the <b> Treblle platform</b> where you created your project.
                        More about ingegration learn more <span style="color: #ffbd39"> <a
                                href="https://docs.treblle.com/en/integrations/net-core/?utm_source=referral&utm_medium=stef_blog&utm_campaign=stefan_content"
                                target="_blank">here</a></span>.
                    </h5>
                    <h3 class="text-center mb-5" style="color: #ffbd39">What can you monitor?
                    </h3>
                    <h5>When you open the project (we will use the Demo project because it is filled with all the data),
                        you will see the following window:
                    </h5>
                    <img src="/images/blog/newsletter20/7.png" alt="Treblle demo project in platform."
                        style="margin-top: 10px; margin-bottom: 10px; width: 100%;">
                    <br>
                    <h5>
                        All information is divided into a couple of tabs:
                        <br>
                        <br>
                        <span style="color: #ffbd39"> 1. Dashboard</span> - It provides an overview of the basic details
                        of the project (the API we monitor).
                        <br>
                        <span style="color: #ffbd39">2. Requests</span> - Enriched display of all requests sent to all
                        endpoints within the API.
                        <br>
                        <span style="color: #ffbd39">3. Endpoints</span> - Shows all endpoints within the API.
                        <br>
                        <span style="color: #ffbd39">4. <b>Problems</b></span> - For each of the endpoints, it provides
                        a view of the problems that were found.
                        <br>
                        <span style="color: #ffbd39">5. Flows</span> - Grouped endpoints in order to obtain a specific
                        API calling flow (for example,
                        authentication + returning logged-in user details).
                        <br>
                        <span style="color: #ffbd39">6. API Score</span> - The quality of your API shown in numbers.
                        What is the performance, security and
                        quality of the API itself - quantified.
                        <br>
                        <br>
                        Let's see the details of each tab, it's very interesting...
                    </h5>
                    <br>
                    <h4 class="mb-5" style="color: #ffbd39">Dashboard
                    </h4>
                    <h5>This is practically the home page of the project (your API). It is fully configurable and it is
                        possible to add your own tabs that you want to see at the very beginning. This option is
                        available on the right by clicking on the <b>"Customize"</b> button.
                    </h5>
                    <img src="/images/blog/newsletter20/8.png" alt="Treblle Dashboard tab."
                        style="margin-top: 10px; margin-bottom: 10px; width: 100%;">
                    <br>
                    <h5>Here you can see, for example, the top cities from which users access the API. I also added
                        statistics by country. You can add your own tabs and delete existing ones.</h5><br>
                    <h4 class="mb-5" style="color: #ffbd39">Requests
                    </h4>
                    <h5>
                        Display of all sent requests to the API since using Treblle for monitoring. Here we can see that
                        about 115 thousand requests have happened. We can filter them, we can turn on real-time
                        filtering.
                        <br>
                        <br>
                        Requests are displayed as "tabs" with pagination at the bottom of the page. On the request card
                        itself, we can see a lot of details:
                        <br>
                        <br>
                        - Request type<br>
                        - Request response<br>
                        - The endpoint itself<br>
                        - Security Details<br>
                        - Load Time<br>
                        - Response Size<br>
                        - The device from which it was sent<br><br>

                        By clicking the <b> View Request</b> button, you can see a lot of information about the request
                        itself, including the Request and Response.
                        <br><br>
                        I really have never seen so many details.
                    </h5>
                    <br>
                    <h4 class="mb-5" style="color: #ffbd39">Endpoints
                    </h4>
                    <h5>
                        On this tab you are shown all the endpoints that are marked with the <span
                            style="color: #ffbd39"> [Treblle] </span> attribute.
                        <br>
                        <br>

                        You can see a display of some basic information about the endpoint itself.
                        <br>
                        <br>
                        What I found useful here is that it calculates the <span style="color: #ffbd39">average
                            execution time</span> , which helps me to see <span style="color: #ffbd39">which of the
                            endpoints can or should be optimized</span> in terms of performance.
                    </h5>

                    <img src="/images/blog/newsletter20/10.png" alt="Treblle Endpoints tab."
                        style="margin-top: 10px; margin-bottom: 10px; width: 100%;">
                    <br>
                    <br>
                    <h4 class="mb-5" style="color: #ffbd39">Problems
                    </h4>
                    <h5>
                        This is one of the newer features of Treblle. Please <span style="color: #ffbd39">pay attention
                            to this tab</span> and the things it displays. Here you can see for each endpoint problems.
                        <br>
                        <br>
                        As additional details, you have the severity, how many times this problem has appeared and
                        whether it has been resolved, as well as the details of what it is about.
                    </h5>

                    <img src="/images/blog/newsletter20/12.png" alt="Treblle Problems tab."
                        style="margin-top: 10px; margin-bottom: 10px; width: 100%;">
                    <br>
                    <h5>
                        In order to see a complete security report on a particular Request, it is necessary to go to
                        Request Details using the View Request button explained above.
                    </h5>
                    <img src="/images/blog/newsletter20/11.png" alt="Treblle Security Audit Details."
                        style="margin-top: 10px; margin-bottom: 10px; width: 100%;">
                    <br>
                    <h5>
                        This is one of the most detailed Security reports I've seen. Each problem has its own
                        description of what it actually is, its Impact and Status.
                        <br>
                        <br>

                        Use this knowledge to improve the security of your endpoints.
                    </h5>
                    <br>

                    <h4 class="mb-5" style="color: #ffbd39">Flows
                    </h4>
                    <h5>
                        Do you want to group requests in some order in which they happen, where the order actually
                        represents the entire process?
                        <br>
                        And to monitor that process?
                        <br>
                        <br>
                        Use the Flow tab.
                        <br>
                        <br>
                        Here you can see already existing groupings of requests (you can see the details of requests by
                        clicking the <span style="color: #ffbd39"> View Flow</span> button), as well as create some new
                        processes.
                    </h5>

                    <img src="/images/blog/newsletter20/13.png" alt="Treblle Flows tab."
                        style="margin-top: 10px; margin-bottom: 10px; width: 100%;">
                    <br>
                    <br>
                    <h4 class="mb-5" style="color: #ffbd39">API Score
                    </h4>
                    <h5>
                        This is my favorite tab.
                        <br>
                        <br>
                        It contains a handful of information expressed in numbers. Here you can actually see the quality
                        of your API.
                        <br>
                        <br>
                        That quality is reflected in the quantification of three things:
                        <br>
                        <br>
                        1. Performances<br>
                        2. Security<br>
                        3. Quality<br>
                        <br><br>
                        - What you can actually see when you visit this tab.
                    </h5>

                    <img src="/images/blog/newsletter20/14.png" alt="Treblle API Score tab."
                        style="margin-top: 10px; margin-bottom: 10px; width: 100%;">
                    <br>
                    <h5>
                        If you start scrolling a bit, you will see that for each of these 3 things there is an
                        additional and detailed explanation of what it consists of, which parameters affect the rating,
                        and most importantly - <span style="color: #ffbd39"> how to improve everything</span>.
                    </h5>
                    <br>
                    <h3 class="text-center mb-5" style="color: #ffbd39">Wrapping Up
                    </h3>
                    <h5>
                        I've been searching for a long time for tools that can give me enough information about my APIs.
                        The reason for this is the need to optimize or additionally secure the endpoints of my
                        applications and client applications.
                        <br>
                        <br>

                        I found Treblle, tried it, tested it and it became indispensable to me.
                        <br>
                        <br>

                        From my experience, the 2 things you have to take into account when creating an ASP.NET Web API
                        are:
                        <br>
                        <br>
                        - Security<br>
                        - Performance<br>
                        <br>
                        By using Treblle, you can seriously work on these things and bring your API to perfection.
                        <br><br>
                        I encourage you to try it.
                        <br><br>
                        Checkout it here: <span style="color: #ffbd39"><a
                                href="https://www.treblle.com/?utm_source=referral&utm_medium=stef_blog&utm_campaign=stefan_content"
                                target="_blank">https://www.treblle.com</a></span> <br>
                        Documentation: <a
                            href="https://docs.treblle.com/en/introduction/?utm_source=referral&utm_medium=stef_blog&utm_campaign=stefan_content"
                            target="_blank"> docs</a></span>
                    </h5><br>
                    <h3 class="text-center"><b>Dream <span style="font-size: 50px;">big!</span></b></h3>
                    <div class="row" style="margin-top: 50px">
                        <div class="col-md-3"></div>
                        <div class="col-md-6 text-center">
                            <h5 style="text-align: center; ">
                                Join the 4300+ engineers who get tips like this <span style="color: #ffbd39;">every
                                    Monday</span> straight to their inbox.
                            </h5>
                            <script async src="https://eocampaign1.com/form/33e483be-a0b1-11ed-b1bd-9b9d338510f2.js"
                                data-form="33e483be-a0b1-11ed-b1bd-9b9d338510f2"></script>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.waypoints.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/main.js"></script>
</body>

</html>